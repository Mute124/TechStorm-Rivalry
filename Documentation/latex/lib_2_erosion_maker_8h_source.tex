\doxysection{Erosion\+Maker.\+h}
\hypertarget{lib_2_erosion_maker_8h_source}{}\label{lib_2_erosion_maker_8h_source}\index{C:/Users/HP/Documents/GitHub/Minero-\/Game/lib/ErosionMaker.h@{C:/Users/HP/Documents/GitHub/Minero-\/Game/lib/ErosionMaker.h}}
\mbox{\hyperlink{lib_2_erosion_maker_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ EROSION\_MAKER}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ EROSION\_MAKER}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_old_2_classes_2lib_2raylib_2src_2raylib_8h}{raylib.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{comment}{//\ used\ to\ sample\ a\ point\ in\ the\ heightmap\ and\ get\ the\ gradient}}
\DoxyCodeLine{00009\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00010\ \{}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{_classes_2lib_2raylib_2src_2external_2_a_n_g_l_e_2_e_g_l_2eglext_8h_aedd0ea77029b98ce91e47c19addcb68f}{height}};}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keywordtype}{float}\ gradientX;}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keywordtype}{float}\ gradientY;}
\DoxyCodeLine{00014\ \}\ \mbox{\hyperlink{struct_height_and_gradient}{HeightAndGradient}};}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{comment}{//\ describes\ the\ shape\ of\ the\ smoothing\ to\ apply\ to\ map\ borders}}
\DoxyCodeLine{00017\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{_classes_2lib_2_erosion_maker_8h_a0bb3c96a5ae4411bf72bdafaaaaec12a}{GradientType}}}
\DoxyCodeLine{00018\ \{}
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{_classes_2lib_2_erosion_maker_8h_a0bb3c96a5ae4411bf72bdafaaaaec12aa4233fbf0cafb86abcee94b38d769fc59}{SQUARE}}\ =\ 0,}
\DoxyCodeLine{00020\ \ \ \ \ \mbox{\hyperlink{_classes_2lib_2_erosion_maker_8h_a0bb3c96a5ae4411bf72bdafaaaaec12aaa79c827759ea48f0735386c4b1188911}{CIRCLE}}\ =\ 1,}
\DoxyCodeLine{00021\ \ \ \ \ \mbox{\hyperlink{_classes_2lib_2_erosion_maker_8h_a0bb3c96a5ae4411bf72bdafaaaaec12aa714f2cc5c292a305e2da3c03bd63916a}{DIAMOND}}\ =\ 2,}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{_classes_2lib_2_erosion_maker_8h_a0bb3c96a5ae4411bf72bdafaaaaec12aa9d398750ed310ae69cd070016810e4dc}{STAR}}\ =\ 3,}
\DoxyCodeLine{00023\ \};}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{comment}{//\ singleton\ responsible\ for\ simulating\ erosion\ on\ a\ heightmap}}
\DoxyCodeLine{00026\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_erosion_maker}{ErosionMaker}}}
\DoxyCodeLine{00027\ \{}
\DoxyCodeLine{00028\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_erosion_maker}{ErosionMaker}}\&\ \mbox{\hyperlink{class_erosion_maker_ae17d133e10e155b6e26674fa588d6453}{GetInstance}}()}
\DoxyCodeLine{00030\ \ \ \ \ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_erosion_maker}{ErosionMaker}}\ instance;\ \textcolor{comment}{//\ Guaranteed\ to\ be\ destroyed.}}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Instantiated\ on\ first\ use.}}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ instance;}
\DoxyCodeLine{00034\ \ \ \ \ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{class_erosion_maker}{ErosionMaker}}()\ \{\}\ \textcolor{comment}{//\ Constructor?\ (the\ \{\}\ brackets)\ are\ needed\ here.}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{//\ C++\ 03}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{comment}{//\ ========}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{//\ Don't\ forget\ to\ declare\ these\ two.\ You\ want\ to\ make\ sure\ they}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{comment}{//\ are\ inaccessible(especially\ from\ outside),\ otherwise,\ you\ may\ accidentally\ get\ copies\ of}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ your\ singleton\ appearing.}}
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{class_erosion_maker}{ErosionMaker}}(\mbox{\hyperlink{class_erosion_maker}{ErosionMaker}}\ \textcolor{keyword}{const}\&);\ \ \ \textcolor{comment}{//\ Don't\ Implement}}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{void}\ operator=(\mbox{\hyperlink{class_erosion_maker}{ErosionMaker}}\ \textcolor{keyword}{const}\&);\ \textcolor{comment}{//\ Don't\ Implement}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//\ C++\ 11}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{comment}{//\ =======}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{//\ We\ can\ use\ the\ better\ technique\ of\ deleting\ the\ methods}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{comment}{//\ we\ don't\ want.}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{comment}{//\ indices\ and\ weights\ of\ erosion\ brush\ precomputed\ for\ every\ cell}}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ it's\ a\ cache\ used\ to\ speed\ up\ the\ area\ of\ effect\ erosion\ of\ a\ droplet}}
\DoxyCodeLine{00054\ \ \ \ \ std::vector<std::vector<int>*>*\ erosionBrushIndices\ =\ \textcolor{keyword}{nullptr};\ \textcolor{comment}{//\ for\ each\ cell,\ a\ reference\ to\ neighbors\ is\ held}}
\DoxyCodeLine{00055\ \ \ \ \ std::vector<std::vector<float>*>*\ erosionBrushWeights\ =\ \textcolor{keyword}{nullptr};\ \textcolor{comment}{//\ for\ each\ cell,\ a\ reference\ to\ how\ much\ it\ influences\ neighbors}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{int}\ currentSeed;\ \textcolor{comment}{//\ current\ random\ seed}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{int}\ currentErosionRadius;\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{int}\ currentMapSize;}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{void}\ Initialize(\textcolor{keywordtype}{int}\ mapSize,\ \textcolor{keywordtype}{bool}\ resetSeed);\ }
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{struct_height_and_gradient}{HeightAndGradient}}\ CalculateHeightAndGradient(std::vector<float>*\ nodes,\ \textcolor{keywordtype}{int}\ mapSize,\ \textcolor{keywordtype}{float}\ posX,\ \textcolor{keywordtype}{float}\ posY);\ \textcolor{comment}{//\ calculates\ height\ and\ gradient\ of\ a\ spot\ in\ the\ map}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{void}\ InitializeBrushIndices(\textcolor{keywordtype}{int}\ mapSize,\ \textcolor{keywordtype}{int}\ radius);\ \textcolor{comment}{//\ initialize\ the\ brush\ cache}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordtype}{float}\ RemapValue(\textcolor{keywordtype}{float}\ \mbox{\hyperlink{classvalue}{value}});\ \textcolor{comment}{//\ remaps\ a\ single\ value\ of\ a\ map\ to\ nonlinear\ scale\ in\ order\ to\ smooth\ beach\ areas}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{comment}{//ErosionMaker(ErosionMaker\ const\ \&)\ =\ delete;}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//void\ operator=(ErosionMaker\ const\ \&)\ =\ delete;}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ Note:\ Scott\ Meyers\ mentions\ in\ his\ Effective\ Modern}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ C++\ book,\ that\ deleted\ functions\ should\ generally}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ be\ public\ as\ it\ results\ in\ better\ error\ messages}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ due\ to\ the\ compilers\ behavior\ to\ check\ accessibility}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ before\ deleted\ status}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//int\ seed\ =\ 0;}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_erosion_maker_ada80269398495d003387712899065a61}{erosionRadius}}\ =\ 6;\textcolor{comment}{//12;\ //\ Range\ (2,\ 8)}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_erosion_maker_a4c7d7ab3878902a01645b7e569853d2c}{inertia}}\ =\ 0.05f;\ \textcolor{comment}{//\ range\ (0,\ 1)\ at\ zero,\ water\ will\ instantly\ change\ direction\ to\ flow\ downhill.\ At\ 1,\ water\ will\ never\ change\ direction.\ }}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_erosion_maker_a145958461d6aaed4636f5f6b4bc57766}{sedimentCapacityFactor}}\ =\ 6.0f;\ \textcolor{comment}{//\ multiplier\ for\ how\ much\ sediment\ a\ droplet\ can\ carry}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_erosion_maker_a7f1fcc0bb9a87e2c1267505e53004e65}{minSedimentCapacity}}\ =\ 0.01f;\ \textcolor{comment}{//\ used\ to\ prevent\ carry\ capacity\ getting\ too\ close\ to\ zero\ on\ flatter\ terrain}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_erosion_maker_a3b33e6f9d2ad0b1be808711c7789fd68}{erodeSpeed}}\ =\ 0.3f;\ \textcolor{comment}{//\ range\ (0,\ 1)\ how\ easily\ a\ droplet\ removes\ sediment}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_erosion_maker_acb95634449d3c7f804f9c3fc766a4630}{depositSpeed}}\ =\ 0.3f;\ \textcolor{comment}{//\ range\ (0,\ 1)\ how\ easily\ a\ droplet\ deposits\ sediment}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_erosion_maker_a7e4593b2f48a8cf116d982a6503004ba}{evaporateSpeed}}\ =\ 0.01f;\ \textcolor{comment}{//\ range\ (0,\ 1)\ droplets\ evaporate\ during\ their\ lifetime,\ reducing\ mass}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_erosion_maker_a84968a5d762c48d0905a26304edc13a0}{gravity}}\ =\ 4.0f;\ \textcolor{comment}{//\ determines\ speed\ increase\ of\ the\ droplet\ upon\ a\ slope}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_erosion_maker_a8a14aa1a5d018f8ac105db4ef88c1615}{maxDropletLifetime}}\ =\ 60;}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_erosion_maker_ab9e42b27af2cbded22a126bb0f15f9d6}{initialWaterVolume}}\ =\ 1;}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_erosion_maker_a53458611e9186e3b0e767750cc97fc76}{initialSpeed}}\ =\ 1;}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_erosion_maker_a16fc934b9484b727647d827071cac841}{Erode}}(std::vector<float>*\ map,\ \textcolor{keywordtype}{int}\ mapSize,\ \textcolor{keywordtype}{int}\ numIterations\ =\ 1,\ \textcolor{keywordtype}{bool}\ resetSeed\ =\ \textcolor{keyword}{false});\ \textcolor{comment}{//\ applies\ erosion\ to\ the\ map}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_erosion_maker_abad42d1d3d1aecfeea9bffc3f10e2f40}{Gradient}}(std::vector<float>*\ map,\ \textcolor{keywordtype}{int}\ mapSize,\ \textcolor{keywordtype}{float}\ normalizedOffset,\ \mbox{\hyperlink{_old_2_classes_2lib_2_erosion_maker_8h_a0bb3c96a5ae4411bf72bdafaaaaec12a}{GradientType}}\ gradientType);\ \textcolor{comment}{//\ allpies\ a\ gradient\ to\ the\ map\ in\ order\ to\ get\ flat\ borders}}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{struct_vector3}{Vector3}}\ \mbox{\hyperlink{class_erosion_maker_a60848ae7b0dbef403350fcd71d456b71}{GetNormal}}(std::vector<float>*\ map,\ \textcolor{keywordtype}{int}\ mapSize,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_classes_2lib_2raylib_2src_2external_2_a_n_g_l_e_2_e_g_l_2eglext_8h_ac916c0825494ac3acd4457effd2823d2}{x}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{_classes_2lib_2raylib_2src_2external_2_a_n_g_l_e_2_e_g_l_2eglext_8h_a4f27f1eebce8c31db01bb39fab9ef561}{y}});\ \textcolor{comment}{//\ gets\ the\ normal\ of\ a\ point\ in\ the\ map\ using\ interpolation}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_erosion_maker_a323c5b8e483ad5bb71db4df28e9fd1f6}{Remap}}(std::vector<float>*\ map,\ \textcolor{keywordtype}{int}\ mapSize);\ \textcolor{comment}{//\ applies\ a\ filter\ to\ the\ map\ in\ order\ to\ flatten\ beach\ areas\ by\ remapping\ normalized\ values}}
\DoxyCodeLine{00095\ \};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
